<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TPV-alpha</title>
  <link rel="icon" type="image/x-icon" href="../assets/favicon.ico">
  <link rel="stylesheet" href="../assets/styles.css">
  <style>
    a {
          color: #6a4a00;
        }
        a:hover {
          color: #b8860b;
        }

        .dark-theme  a {
      color: #ffe066;
    }
    .dark-theme a:hover {
      color: #ffd83c;
    }
    </style>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
  <button class="theme-toggle" id="themeToggle" aria-label="Chuy·ªÉn ƒë·ªïi giao di·ªán s√°ng/t·ªëi">
    <span class="theme-icon" id="themeIcon">üåô</span>
  </button>
  <button class="lang-toggle" id="langToggle" aria-label="Chuy·ªÉn ƒë·ªïi ng√¥n ng·ªØ">VI</button>
  <div class="main-layout">
    <aside class="sidebar">
      <div class="logo">
        <span class="logo-large"><a href="/"><img src="../assets/logo-light.png" alt="logo" class="logo-image" width="100px" height="100px"></a></span>
      </div>
      <nav class="nav-menu">
        <a href="/news/" class="nav-btn active" id="navNews">B·∫£ng tin</a>
        <a href="/navigation/" class="nav-btn" id="navNav">Trang ƒëi·ªÅu h∆∞·ªõng</a>
        <a href="/registration/" class="nav-btn" id="navReg">Trang ƒëƒÉng k√Ω</a>
        <a href="/request/" class="nav-btn" id="navReq">Trang y√™u c·∫ßu</a>
        <a href="/guide/" class="nav-btn" id="navGuide">H∆∞·ªõng d·∫´n</a>
      </nav>
    </aside>
    <section class="content">
      <div style="display: flex; margin-top: 24px; align-items: center; margin-bottom: 24px;">
<button onclick="window.history.back()" class="back-btn" aria-label="Quay l·∫°i" style="margin-right: 12px; background: var(--btn-bg); border: none; border-radius: 6px; padding: 4px 12px; cursor: pointer; color: var(--btn-icon);">
  <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
    <path d="M15 6L9 12L15 18" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
  </svg>
</button>
        <h1 style="margin: 0;" id="news-title">Tin t·ª©c m·ªõi nh·∫•t</h1>
      </div>
      <div id="news-list" class="news-list"></div>
    </section>
  </div>
  <script src="../assets/script.js"></script>
  <script>
    // Language translations object
    const translations = {
      vi: {
        // Page title
        pageTitle: 'TPV-alpha | Tin t·ª©c',
        
        // Theme toggle
        themeToggleLabel: 'Chuy·ªÉn ƒë·ªïi giao di·ªán s√°ng/t·ªëi',
        
        // Back button
        backButtonLabel: 'Quay l·∫°i',
        
        // Main heading
        mainHeading: 'B·∫£ng tin',
        
        // No news message
        noNewsMessage: 'Kh√¥ng c√≥ tin t·ª©c n√†o.',
        
        // Navigation buttons
        navNews: 'B·∫£ng tin',
        navNav: 'Trang ƒëi·ªÅu h∆∞·ªõng',
        navReg: 'Trang ƒëƒÉng k√Ω',
        navReq: 'Trang y√™u c·∫ßu',
        navGuide: 'H∆∞·ªõng d·∫´n'
      },
      en: {
        // Page title
        pageTitle: 'TPV-alpha | News',
        
        // Theme toggle
        themeToggleLabel: 'Toggle light/dark theme',
        
        // Back button
        backButtonLabel: 'Go back',
        
        // Main heading
        mainHeading: 'Newspage',
        
        // No news message
        noNewsMessage: 'No news available.',
        
        // Navigation buttons
        navNews: 'Newspage',
        navNav: 'Navigation page',
        navReg: 'Registration page',
        navReq: 'Request page',
        navGuide: 'Guidelines'
      }
    };

    // Language toggle functionality
    const langToggle = document.getElementById('langToggle');
    let isEnglish = localStorage.getItem('lang') === 'en';

    function saveLanguage(english) {
      localStorage.setItem('lang', english ? 'en' : 'vi');
    }
    
    function renderNews(data, english) {
      const list = document.getElementById('news-list');
      const t = translations[english ? 'en' : 'vi'];
      
      if (!Array.isArray(data) || data.length === 0) {
        list.innerHTML = `
          <div class="news-item no-news">
            <p>${t.noNewsMessage}</p>
          </div>
        `;
        setTimeout(() => {
          document.querySelector('.news-item.no-news')?.classList.add('loaded');
        }, 100);
        return;
      }

      list.innerHTML = data.map((news, idx) => `
        <div class="news-item" id="news-item-${idx}">
          ${news.image ? `<img class='news-img' src='${news.image}' alt='·∫¢nh tin t·ª©c'>` : ''}
          <h2 class="news-title">${english ? (news['title-en'] || news.title) : news.title}</h2>
          <div class="news-meta">${news.date ? `<span>${news.date}</span>` : ''}</div>
          <div class="news-content">${english ? (news['content-en'] || news.content) : news.content}</div>
        </div>
      `).join('');
      // Onload animation cho t·ª´ng news-item
      setTimeout(() => {
        document.querySelectorAll('.news-item').forEach((item, i) => {
          setTimeout(() => item.classList.add('loaded'), i * 180);
        });
      }, 300);
    }

    function updateLanguage() {
      const lang = isEnglish ? 'en' : 'vi';
      const t = translations[lang];
      
      // Update page title
      document.title = t.pageTitle;
      
      // Update theme toggle aria-label
      document.getElementById('themeToggle').setAttribute('aria-label', t.themeToggleLabel);
      
      // Update back button aria-label
      document.querySelector('.back-btn').setAttribute('aria-label', t.backButtonLabel);
      
      // Update main heading
      document.getElementById('news-title').textContent = t.mainHeading;
      
      // Update sidebar button text
      document.getElementById('navNews').textContent = t.navNews;
      document.getElementById('navNav').textContent = t.navNav;
      document.getElementById('navReg').textContent = t.navReg;
      document.getElementById('navReq').textContent = t.navReq;
      document.getElementById('navGuide').textContent = t.navGuide;
      
      // Re-render news with new language
      renderNews(newsData, isEnglish);
    }

    let newsData = [];

    // Load news from JSON once
    // Initial render (shows "No news available" before fetch completes)
    renderNews(newsData, isEnglish);

    fetch('../assets/news.json')
      .then(res => res.json())
      .then(data => {
        newsData = data;
        renderNews(newsData, isEnglish);
      })
      .catch(() => {
        // If fetch fails, show "No news available"
        renderNews([], isEnglish);
      });

    langToggle.addEventListener('click', () => {
      isEnglish = !isEnglish;
      langToggle.textContent = isEnglish ? 'EN' : 'VI';
      saveLanguage(isEnglish);
      updateLanguage();
    });

    // Set initial language state
    langToggle.textContent = isEnglish ? 'EN' : 'VI';
    updateLanguage();
  </script>

</body>
</html>
